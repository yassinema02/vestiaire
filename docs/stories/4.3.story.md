# Story 4.3: Daily Outfit Suggestion Screen

## Status

**Done**

---

## Story

**As a** user,
**I want** to see AI-generated outfit suggestions for today,
**so that** I can quickly decide what to wear.

---

## Acceptance Criteria

1. Home screen shows primary outfit suggestion with item images
2. Weather and calendar context displayed above outfit
3. "Why this outfit?" explanation from AI visible
4. Outfit displayed as layered/composed view
5. "Regenerate" button fetches new suggestion
6. Loading state with skeleton/animation during generation
7. Empty state if wardrobe has <5 items

---

## Tasks / Subtasks

- [x] **Task 1: Create OutfitCard component** (AC: 1, 3, 4)
  - [x] Create `components/features/OutfitCard.tsx`
  - [x] Display outfit name and occasion badge
  - [x] Show item images in a composed/layered layout
  - [x] Display "Why this outfit?" rationale section
  - [x] Add "Save" button for saving to My Outfits

- [x] **Task 2: Create OutfitSuggestionWidget** (AC: 1, 5, 6)
  - [x] Create `components/features/OutfitSuggestionWidget.tsx`
  - [x] Integrate with `useOutfitGeneration` hook
  - [x] Show loading animation during generation
  - [x] Add "Regenerate" button with refresh icon
  - [x] Handle error states gracefully

- [x] **Task 3: Update home screen** (AC: 1, 2)
  - [x] Add OutfitSuggestionWidget to home screen
  - [x] Position below weather and calendar context
  - [x] Auto-generate on screen load

- [x] **Task 4: Create empty state** (AC: 7)
  - [x] Design empty state for < 3 wardrobe items
  - [x] Show helpful message and "Add Items" CTA
  - [x] Link to wardrobe add flow

- [x] **Task 5: Add item image grid** (AC: 4)
  - [x] Display outfit items in a visual grid
  - [x] Show item category labels
  - [x] Make items tappable to view details

---

## Dev Notes

### Previous Story Insights
[Source: Story 4.1, Story 4.2]

**OutfitSuggestion from aiOutfitService:**
```typescript
interface OutfitSuggestion {
    name: string;
    items: string[];  // Item IDs
    occasion: OccasionType;
    rationale: string;
}
```

**useOutfitGeneration hook provides:**
- `suggestions` - Array of outfit suggestions
- `isLoading` - Loading state
- `error` - Error message
- `generate()` - Generate new suggestions
- `regenerate()` - Clear and regenerate
- `saveSuggestion()` - Save to outfits

**Home screen currently shows:**
- Weather widget (WeatherWidget)
- Calendar events (EventsWidget)
- Quick action cards

### Visual Design

```
┌─────────────────────────────────┐
│      Today's Look               │
│  ╔═══════════════════════════╗  │
│  ║   [Outfit Name]           ║  │
│  ║   Occasion: Work          ║  │
│  ║                           ║  │
│  ║  ┌───┐ ┌───┐ ┌───┐       ║  │
│  ║  │Top│ │Bot│ │Shoe│      ║  │
│  ║  └───┘ └───┘ └───┘       ║  │
│  ║                           ║  │
│  ║  "Why this outfit?"       ║  │
│  ║  Navy blazer pairs...     ║  │
│  ║                           ║  │
│  ║  [Regenerate] [Save]      ║  │
│  ╚═══════════════════════════╝  │
└─────────────────────────────────┘
```

### File Locations

```
apps/mobile/
├── components/features/
│   ├── OutfitCard.tsx              # NEW: Single outfit display
│   └── OutfitSuggestionWidget.tsx  # NEW: Widget for home screen
├── app/(tabs)/
│   └── index.tsx                   # UPDATE: Add outfit widget
```

---

## Testing

### Test Cases

**Component:**
- Displays outfit with correct name and occasion
- Shows all item images from suggestion
- Rationale text is visible and readable

**Loading:**
- Skeleton shows during generation
- Regenerate button is disabled while loading

**Empty State:**
- Shows when wardrobe has < 5 items
- "Add Items" button navigates to add screen

**Save:**
- Saving suggestion shows success feedback
- Saved outfit appears in My Outfits

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-01 | 1.0 | Initial story draft | Bob (SM) |

---

## Dev Agent Record

### Agent Model Used
Claude (Anthropic) via Antigravity

### Debug Log References
TypeScript check passed (only pre-existing error in aiCategorization.ts)

### Completion Notes List
1. Created `OutfitCard.tsx` with items grid, occasion badge, rationale section, and save button
2. Created `OutfitSuggestionWidget.tsx` with loading, error, empty, and success states
3. Widget auto-generates suggestions on first load
4. Regenerate button clears saved state and fetches new suggestions
5. Save button persists outfit with weather context snapshot
6. Empty state shows when wardrobe has < 3 items with "Add Items" CTA
7. Items are tappable to navigate to item detail screen
8. Updated home screen to use widget instead of placeholder

### File List

| File | Action | Description |
|------|--------|-------------|
| `components/features/OutfitCard.tsx` | NEW | Single outfit display component |
| `components/features/OutfitSuggestionWidget.tsx` | NEW | Home screen widget with all states |
| `app/(tabs)/index.tsx` | MODIFIED | Integrated OutfitSuggestionWidget |
